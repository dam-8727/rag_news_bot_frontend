{"ast":null,"code":"var _jsxFileName = \"/Users/daminisingla/Desktop/news_frontend/frontend/src/components/Message.js\";\nimport React from 'react';\nimport './Message.scss';\n\n// This component handles displaying individual chat messages\n// It can show both user messages and bot responses with citations\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Message = ({\n  message\n}) => {\n  // Figure out what type of message this is\n  const isUser = message.role === 'user'; // Is this from the user or the bot?\n  const isError = message.isError; // Did something go wrong?\n\n  // Convert timestamp to readable time format (like \"2:30 PM\")\n  const formatTime = timestamp => {\n    // Check if timestamp is valid\n    if (!timestamp) {\n      return 'Just now';\n    }\n    const date = new Date(timestamp);\n\n    // Check if the date is valid\n    if (isNaN(date.getTime())) {\n      return 'Just now';\n    }\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // When user clicks a citation number, scroll to that source\n  const scrollToCitation = citationNumber => {\n    // Find the citation element by its ID (unique per message)\n    const citationElement = document.getElementById(`citation-${message.id}-${citationNumber}`);\n    if (citationElement) {\n      // Smoothly scroll to the citation\n      citationElement.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center'\n      });\n\n      // Add a temporary highlight effect so user knows which one they clicked\n      citationElement.classList.add('citation-highlight');\n      // Remove the highlight after 2 seconds\n      setTimeout(() => {\n        citationElement.classList.remove('citation-highlight');\n      }, 2000);\n    }\n  };\n\n  // This function makes citation numbers clickable and pretty\n  const renderMessageText = text => {\n    // Don't process user messages or empty text\n    if (!text || isUser) {\n      return text;\n    }\n\n    // Look for citation patterns like [1], [2], [3, 5], [2, 7] in the text\n    // The regex finds square brackets with numbers and commas inside\n    const citationRegex = /\\[([\\d,\\s]+)\\]/g;\n    // Split the text into parts - citation numbers will be separate\n    const parts = text.split(citationRegex);\n\n    // Go through each part and make citation numbers clickable\n    return parts.map((part, index) => {\n      // Odd indices are the citation numbers (due to how split works)\n      if (index % 2 === 1) {\n        // Extract individual numbers from complex citations like \"3, 5\" or \"2, 7\"\n        const numbers = part.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));\n        const firstNumber = numbers[0]; // Use the first number for scrolling\n\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"citation-number\",\n          onClick: () => scrollToCitation(firstNumber),\n          title: `Click to view source ${firstNumber}`,\n          children: [\"[\", part, \"]\"]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this);\n      }\n      // Regular text parts just get returned as-is\n      return part;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `message ${isUser ? 'user' : 'bot'} ${isError ? 'error' : ''}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-text\",\n        children: message.text ? renderMessageText(message.text) : 'Message content not available'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), message.citations && message.citations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"citations\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"citations-header\",\n          children: \"Sources:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), message.citations.map((citation, index) => {\n          // Use the citation's actual number if it has one, otherwise use index + 1\n          const citationNumber = citation.number || index + 1;\n          return /*#__PURE__*/_jsxDEV(\"a\", {\n            id: `citation-${message.id}-${citationNumber}` // This ID is used for scrolling (unique per message)\n            ,\n            href: citation.url,\n            target: \"_blank\" // Open in new tab\n            ,\n            rel: \"noopener noreferrer\" // Security thing\n            ,\n            className: \"citation-link\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"citation-index\",\n              children: [\"[\", citationNumber, \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this), citation.title, citation.score && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"citation-score\",\n              children: [\"(\", Math.round(citation.score * 100), \"% match)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-time\",\n        children: formatTime(message.timestamp)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_c = Message;\nexport default Message;\nvar _c;\n$RefreshReg$(_c, \"Message\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","Message","message","isUser","role","isError","formatTime","timestamp","date","Date","isNaN","getTime","toLocaleTimeString","hour","minute","scrollToCitation","citationNumber","citationElement","document","getElementById","id","scrollIntoView","behavior","block","classList","add","setTimeout","remove","renderMessageText","text","citationRegex","parts","split","map","part","index","numbers","num","parseInt","trim","filter","firstNumber","className","onClick","title","children","fileName","_jsxFileName","lineNumber","columnNumber","citations","length","citation","number","href","url","target","rel","score","Math","round","_c","$RefreshReg$"],"sources":["/Users/daminisingla/Desktop/news_frontend/frontend/src/components/Message.js"],"sourcesContent":["import React from 'react';\nimport './Message.scss';\n\n// This component handles displaying individual chat messages\n// It can show both user messages and bot responses with citations\nconst Message = ({ message }) => {\n  // Figure out what type of message this is\n  const isUser = message.role === 'user';  // Is this from the user or the bot?\n  const isError = message.isError;         // Did something go wrong?\n\n  // Convert timestamp to readable time format (like \"2:30 PM\")\n  const formatTime = (timestamp) => {\n    // Check if timestamp is valid\n    if (!timestamp) {\n      return 'Just now';\n    }\n    \n    const date = new Date(timestamp);\n    \n    // Check if the date is valid\n    if (isNaN(date.getTime())) {\n      return 'Just now';\n    }\n    \n    return date.toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  // When user clicks a citation number, scroll to that source\n  const scrollToCitation = (citationNumber) => {\n    // Find the citation element by its ID (unique per message)\n    const citationElement = document.getElementById(`citation-${message.id}-${citationNumber}`);\n    if (citationElement) {\n      // Smoothly scroll to the citation\n      citationElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n     \n      // Add a temporary highlight effect so user knows which one they clicked\n      citationElement.classList.add('citation-highlight');\n      // Remove the highlight after 2 seconds\n      setTimeout(() => {\n        citationElement.classList.remove('citation-highlight');\n      }, 2000);\n    }\n  };\n\n  // This function makes citation numbers clickable and pretty\n  const renderMessageText = (text) => {\n    // Don't process user messages or empty text\n    if (!text || isUser) {\n      return text;\n    }\n\n    // Look for citation patterns like [1], [2], [3, 5], [2, 7] in the text\n    // The regex finds square brackets with numbers and commas inside\n    const citationRegex = /\\[([\\d,\\s]+)\\]/g;\n    // Split the text into parts - citation numbers will be separate\n    const parts = text.split(citationRegex);\n    \n    // Go through each part and make citation numbers clickable\n    return parts.map((part, index) => {\n      // Odd indices are the citation numbers (due to how split works)\n      if (index % 2 === 1) {\n        // Extract individual numbers from complex citations like \"3, 5\" or \"2, 7\"\n        const numbers = part.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));\n        const firstNumber = numbers[0]; // Use the first number for scrolling\n        \n        return (\n          <span\n            key={index}\n            className=\"citation-number\"\n            onClick={() => scrollToCitation(firstNumber)}\n            title={`Click to view source ${firstNumber}`}\n          >\n            [{part}]\n          </span>\n        );\n      }\n      // Regular text parts just get returned as-is\n      return part;\n    });\n  };\n\n  return (\n    <div className={`message ${isUser ? 'user' : 'bot'} ${isError ? 'error' : ''}`}>\n      <div className=\"message-content\">\n        {/* Display the actual message text with clickable citations */}\n        <div className=\"message-text\">\n          {message.text ? renderMessageText(message.text) : 'Message content not available'}\n        </div>\n        \n        {/* Show sources if the bot provided any citations */}\n        {message.citations && message.citations.length > 0 && (\n          <div className=\"citations\">\n            <div className=\"citations-header\">Sources:</div>\n            {message.citations.map((citation, index) => {\n              // Use the citation's actual number if it has one, otherwise use index + 1\n              const citationNumber = citation.number || (index + 1);\n              return (\n                <a\n                  key={index}\n                  id={`citation-${message.id}-${citationNumber}`}  // This ID is used for scrolling (unique per message)\n                  href={citation.url}\n                  target=\"_blank\"  // Open in new tab\n                  rel=\"noopener noreferrer\"  // Security thing\n                  className=\"citation-link\"\n                >\n                  <span className=\"citation-index\">[{citationNumber}]</span>\n                  {citation.title}\n                  {/* Show match percentage if available */}\n                  {citation.score && (\n                    <span className=\"citation-score\">\n                      ({Math.round(citation.score * 100)}% match)\n                    </span>\n                  )}\n                </a>\n              );\n            })}\n          </div>\n        )}\n        \n        {/* Show when the message was sent */}\n        <div className=\"message-time\">\n          {formatTime(message.timestamp)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Message;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}